[tool:pytest]
minversion = "6.0"
addopts = -ra --strict-markers --strict-config --tb=short -p no:warnings
testpaths = backend/tests
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*
markers =
    unit: Unit tests (fast, no network, no external dependencies)
    integration: Integration tests (may require network/external services)
    fallback: Parameter fallback behavior tests
    multihorizon: Multi-horizon simulation tests
    slow: Slow running tests
    slow: Slow tests (may take more than 1 second)
    network: Tests that require network access
    parametrize: Parametrized tests with multiple inputs
    regression: Regression tests for specific bug fixes
    fallback: Tests for parameter fallback behavior
    multihorizon: Tests for multi-horizon simulation logic

# Numeric tolerance constants for CI stability
# NUMERIC_TOLERANCE = 1e-4  # General numeric comparisons
# PROBABILITY_TOLERANCE = 1e-3  # Probability comparisons (looser)  
# R2_TOLERANCE = 1e-4  # R-squared comparisons
# PENALTY_MIN = 0.0  # Minimum penalty value
# PENALTY_MAX = 50.0  # Maximum penalty value